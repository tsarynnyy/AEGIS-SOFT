{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":78,"index":78}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":79},"end":{"line":2,"column":69,"index":148}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"../services/api","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":149},"end":{"line":3,"column":38,"index":187}}],"key":"Pr5/EB33W7mJGi+ygccy+pUf1E8=","exportNames":["*"],"imports":1}},{"name":"react/jsx-dev-runtime","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"L9D70Z4hi4aGuui1ysja/oQ5ytI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _jsxFileName = \"/app/frontend/contexts/AuthContext.tsx\";\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"AuthProvider\", {\n    enumerable: true,\n    get: function () {\n      return AuthProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useAuth\", {\n    enumerable: true,\n    get: function () {\n      return useAuth;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _servicesApi = require(_dependencyMap[2], \"../services/api\");\n  var _reactJsxDevRuntime = require(_dependencyMap[3], \"react/jsx-dev-runtime\");\n  const AuthContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const AuthProvider = ({\n    children\n  }) => {\n    const [user, setUser] = (0, _react.useState)(null);\n    const [accessToken, setAccessToken] = (0, _react.useState)(null);\n    const [isLoading, setIsLoading] = (0, _react.useState)(true);\n\n    // Load saved auth on mount\n    (0, _react.useEffect)(() => {\n      loadSavedAuth();\n    }, []);\n    const loadSavedAuth = async () => {\n      try {\n        const savedToken = await AsyncStorage.default.getItem('access_token');\n        const savedUser = await AsyncStorage.default.getItem('user');\n        if (savedToken && savedUser) {\n          setAccessToken(savedToken);\n          setUser(JSON.parse(savedUser));\n        }\n      } catch (error) {\n        console.error('Failed to load saved auth:', error);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    const login = async (email, password) => {\n      try {\n        const response = await _servicesApi.api.login({\n          email,\n          password\n        });\n        if (response.error) {\n          return {\n            success: false,\n            error: response.error\n          };\n        }\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n\n        // Save to state\n        setAccessToken(access_token);\n        setUser(userData);\n\n        // Save to AsyncStorage\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        return {\n          success: true\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: 'Login failed. Please try again.'\n        };\n      }\n    };\n    const register = async (email, password, firstName, lastName) => {\n      try {\n        const response = await _servicesApi.api.register({\n          email,\n          password,\n          role: 'member',\n          first_name: firstName,\n          last_name: lastName\n        });\n        if (response.error) {\n          return {\n            success: false,\n            error: response.error\n          };\n        }\n        const {\n          access_token,\n          user: userData\n        } = response.data;\n\n        // Save to state\n        setAccessToken(access_token);\n        setUser(userData);\n\n        // Save to AsyncStorage\n        await AsyncStorage.default.setItem('access_token', access_token);\n        await AsyncStorage.default.setItem('user', JSON.stringify(userData));\n        return {\n          success: true\n        };\n      } catch (error) {\n        return {\n          success: false,\n          error: 'Registration failed. Please try again.'\n        };\n      }\n    };\n    const logout = async () => {\n      try {\n        console.log('Logging out...');\n        await AsyncStorage.default.removeItem('access_token');\n        await AsyncStorage.default.removeItem('user');\n        setAccessToken(null);\n        setUser(null);\n        console.log('Logout successful - auth state cleared');\n      } catch (error) {\n        console.error('Logout failed:', error);\n      }\n    };\n    return /*#__PURE__*/(0, _reactJsxDevRuntime.jsxDEV)(AuthContext.Provider, {\n      value: {\n        user,\n        accessToken,\n        isLoading,\n        login,\n        register,\n        logout\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }, this);\n  };\n  const useAuth = () => {\n    const context = (0, _react.useContext)(AuthContext);\n    if (context === undefined) {\n      throw new Error('useAuth must be used within an AuthProvider');\n    }\n    return context;\n  };\n});","lineCount":162,"map":[[13,2,24,0,"Object"],[13,8,24,0],[13,9,24,0,"defineProperty"],[13,23,24,0],[13,24,24,0,"exports"],[13,31,24,0],[14,4,24,0,"enumerable"],[14,14,24,0],[15,4,24,0,"get"],[15,7,24,0],[15,18,24,0,"get"],[15,19,24,0],[16,6,24,0],[16,13,24,0,"AuthProvider"],[16,25,24,0],[17,4,24,0],[18,2,24,0],[19,2,124,0,"Object"],[19,8,124,0],[19,9,124,0,"defineProperty"],[19,23,124,0],[19,24,124,0,"exports"],[19,31,124,0],[20,4,124,0,"enumerable"],[20,14,124,0],[21,4,124,0,"get"],[21,7,124,0],[21,18,124,0,"get"],[21,19,124,0],[22,6,124,0],[22,13,124,0,"useAuth"],[22,20,124,0],[23,4,124,0],[24,2,124,0],[25,2,1,0],[25,6,1,0,"_react"],[25,12,1,0],[25,15,1,0,"require"],[25,22,1,0],[25,23,1,0,"_dependencyMap"],[25,37,1,0],[26,2,2,0],[26,6,2,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,2,0],[26,45,2,0,"require"],[26,52,2,0],[26,53,2,0,"_dependencyMap"],[26,67,2,0],[27,2,2,0],[27,6,2,0,"AsyncStorage"],[27,18,2,0],[27,21,2,0,"_interopDefault"],[27,36,2,0],[27,37,2,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,2,0],[28,2,3,0],[28,6,3,0,"_servicesApi"],[28,18,3,0],[28,21,3,0,"require"],[28,28,3,0],[28,29,3,0,"_dependencyMap"],[28,43,3,0],[29,2,3,38],[29,6,3,38,"_reactJsxDevRuntime"],[29,25,3,38],[29,28,3,38,"require"],[29,35,3,38],[29,36,3,38,"_dependencyMap"],[29,50,3,38],[30,2,22,0],[30,8,22,6,"AuthContext"],[30,19,22,17],[30,35,22,20],[30,39,22,20,"createContext"],[30,45,22,33],[30,46,22,33,"createContext"],[30,59,22,33],[30,61,22,63,"undefined"],[30,70,22,72],[30,71,22,73],[31,2,24,7],[31,8,24,13,"AuthProvider"],[31,20,24,66],[31,23,24,69,"AuthProvider"],[31,24,24,70],[32,4,24,72,"children"],[33,2,24,81],[33,3,24,82],[33,8,24,87],[34,4,25,2],[34,10,25,8],[34,11,25,9,"user"],[34,15,25,13],[34,17,25,15,"setUser"],[34,24,25,22],[34,25,25,23],[34,28,25,26],[34,32,25,26,"useState"],[34,38,25,34],[34,39,25,34,"useState"],[34,47,25,34],[34,49,25,48],[34,53,25,52],[34,54,25,53],[35,4,26,2],[35,10,26,8],[35,11,26,9,"accessToken"],[35,22,26,20],[35,24,26,22,"setAccessToken"],[35,38,26,36],[35,39,26,37],[35,42,26,40],[35,46,26,40,"useState"],[35,52,26,48],[35,53,26,48,"useState"],[35,61,26,48],[35,63,26,64],[35,67,26,68],[35,68,26,69],[36,4,27,2],[36,10,27,8],[36,11,27,9,"isLoading"],[36,20,27,18],[36,22,27,20,"setIsLoading"],[36,34,27,32],[36,35,27,33],[36,38,27,36],[36,42,27,36,"useState"],[36,48,27,44],[36,49,27,44,"useState"],[36,57,27,44],[36,59,27,45],[36,63,27,49],[36,64,27,50],[38,4,29,2],[39,4,30,2],[39,8,30,2,"useEffect"],[39,14,30,11],[39,15,30,11,"useEffect"],[39,24,30,11],[39,26,30,12],[39,32,30,18],[40,6,31,4,"loadSavedAuth"],[40,19,31,17],[40,20,31,18],[40,21,31,19],[41,4,32,2],[41,5,32,3],[41,7,32,5],[41,9,32,7],[41,10,32,8],[42,4,34,2],[42,10,34,8,"loadSavedAuth"],[42,23,34,21],[42,26,34,24],[42,32,34,24,"loadSavedAuth"],[42,33,34,24],[42,38,34,36],[43,6,35,4],[43,10,35,8],[44,8,36,6],[44,14,36,12,"savedToken"],[44,24,36,22],[44,27,36,25],[44,33,36,31,"AsyncStorage"],[44,45,36,43],[44,46,36,43,"default"],[44,53,36,43],[44,54,36,44,"getItem"],[44,61,36,51],[44,62,36,52],[44,76,36,66],[44,77,36,67],[45,8,37,6],[45,14,37,12,"savedUser"],[45,23,37,21],[45,26,37,24],[45,32,37,30,"AsyncStorage"],[45,44,37,42],[45,45,37,42,"default"],[45,52,37,42],[45,53,37,43,"getItem"],[45,60,37,50],[45,61,37,51],[45,67,37,57],[45,68,37,58],[46,8,39,6],[46,12,39,10,"savedToken"],[46,22,39,20],[46,26,39,24,"savedUser"],[46,35,39,33],[46,37,39,35],[47,10,40,8,"setAccessToken"],[47,24,40,22],[47,25,40,23,"savedToken"],[47,35,40,33],[47,36,40,34],[48,10,41,8,"setUser"],[48,17,41,15],[48,18,41,16,"JSON"],[48,22,41,20],[48,23,41,21,"parse"],[48,28,41,26],[48,29,41,27,"savedUser"],[48,38,41,36],[48,39,41,37],[48,40,41,38],[49,8,42,6],[50,6,43,4],[50,7,43,5],[50,8,43,6],[50,15,43,13,"error"],[50,20,43,18],[50,22,43,20],[51,8,44,6,"console"],[51,15,44,13],[51,16,44,14,"error"],[51,21,44,19],[51,22,44,20],[51,50,44,48],[51,52,44,50,"error"],[51,57,44,55],[51,58,44,56],[52,6,45,4],[52,7,45,5],[52,16,45,14],[53,8,46,6,"setIsLoading"],[53,20,46,18],[53,21,46,19],[53,26,46,24],[53,27,46,25],[54,6,47,4],[55,4,48,2],[55,5,48,3],[56,4,50,2],[56,10,50,8,"login"],[56,15,50,13],[56,18,50,16],[56,24,50,16,"login"],[56,25,50,23,"email"],[56,30,50,36],[56,32,50,38,"password"],[56,40,50,54],[56,45,50,59],[57,6,51,4],[57,10,51,8],[58,8,52,6],[58,14,52,12,"response"],[58,22,52,20],[58,25,52,23],[58,31,52,29,"api"],[58,43,52,32],[58,44,52,32,"api"],[58,47,52,32],[58,48,52,33,"login"],[58,53,52,38],[58,54,52,39],[59,10,52,41,"email"],[59,15,52,46],[60,10,52,48,"password"],[61,8,52,57],[61,9,52,58],[61,10,52,59],[62,8,54,6],[62,12,54,10,"response"],[62,20,54,18],[62,21,54,19,"error"],[62,26,54,24],[62,28,54,26],[63,10,55,8],[63,17,55,15],[64,12,55,17,"success"],[64,19,55,24],[64,21,55,26],[64,26,55,31],[65,12,55,33,"error"],[65,17,55,38],[65,19,55,40,"response"],[65,27,55,48],[65,28,55,49,"error"],[66,10,55,55],[66,11,55,56],[67,8,56,6],[68,8,58,6],[68,14,58,12],[69,10,58,14,"access_token"],[69,22,58,26],[70,10,58,28,"user"],[70,14,58,32],[70,16,58,34,"userData"],[71,8,58,43],[71,9,58,44],[71,12,58,47,"response"],[71,20,58,55],[71,21,58,56,"data"],[71,25,58,60],[73,8,60,6],[74,8,61,6,"setAccessToken"],[74,22,61,20],[74,23,61,21,"access_token"],[74,35,61,33],[74,36,61,34],[75,8,62,6,"setUser"],[75,15,62,13],[75,16,62,14,"userData"],[75,24,62,22],[75,25,62,23],[77,8,64,6],[78,8,65,6],[78,14,65,12,"AsyncStorage"],[78,26,65,24],[78,27,65,24,"default"],[78,34,65,24],[78,35,65,25,"setItem"],[78,42,65,32],[78,43,65,33],[78,57,65,47],[78,59,65,49,"access_token"],[78,71,65,61],[78,72,65,62],[79,8,66,6],[79,14,66,12,"AsyncStorage"],[79,26,66,24],[79,27,66,24,"default"],[79,34,66,24],[79,35,66,25,"setItem"],[79,42,66,32],[79,43,66,33],[79,49,66,39],[79,51,66,41,"JSON"],[79,55,66,45],[79,56,66,46,"stringify"],[79,65,66,55],[79,66,66,56,"userData"],[79,74,66,64],[79,75,66,65],[79,76,66,66],[80,8,68,6],[80,15,68,13],[81,10,68,15,"success"],[81,17,68,22],[81,19,68,24],[82,8,68,29],[82,9,68,30],[83,6,69,4],[83,7,69,5],[83,8,69,6],[83,15,69,13,"error"],[83,20,69,18],[83,22,69,20],[84,8,70,6],[84,15,70,13],[85,10,70,15,"success"],[85,17,70,22],[85,19,70,24],[85,24,70,29],[86,10,70,31,"error"],[86,15,70,36],[86,17,70,38],[87,8,70,72],[87,9,70,73],[88,6,71,4],[89,4,72,2],[89,5,72,3],[90,4,74,2],[90,10,74,8,"register"],[90,18,74,16],[90,21,74,19],[90,27,74,19,"register"],[90,28,74,26,"email"],[90,33,74,39],[90,35,74,41,"password"],[90,43,74,57],[90,45,74,59,"firstName"],[90,54,74,77],[90,56,74,79,"lastName"],[90,64,74,96],[90,69,74,101],[91,6,75,4],[91,10,75,8],[92,8,76,6],[92,14,76,12,"response"],[92,22,76,20],[92,25,76,23],[92,31,76,29,"api"],[92,43,76,32],[92,44,76,32,"api"],[92,47,76,32],[92,48,76,33,"register"],[92,56,76,41],[92,57,76,42],[93,10,77,8,"email"],[93,15,77,13],[94,10,78,8,"password"],[94,18,78,16],[95,10,79,8,"role"],[95,14,79,12],[95,16,79,14],[95,24,79,22],[96,10,80,8,"first_name"],[96,20,80,18],[96,22,80,20,"firstName"],[96,31,80,29],[97,10,81,8,"last_name"],[97,19,81,17],[97,21,81,19,"lastName"],[98,8,82,6],[98,9,82,7],[98,10,82,8],[99,8,84,6],[99,12,84,10,"response"],[99,20,84,18],[99,21,84,19,"error"],[99,26,84,24],[99,28,84,26],[100,10,85,8],[100,17,85,15],[101,12,85,17,"success"],[101,19,85,24],[101,21,85,26],[101,26,85,31],[102,12,85,33,"error"],[102,17,85,38],[102,19,85,40,"response"],[102,27,85,48],[102,28,85,49,"error"],[103,10,85,55],[103,11,85,56],[104,8,86,6],[105,8,88,6],[105,14,88,12],[106,10,88,14,"access_token"],[106,22,88,26],[107,10,88,28,"user"],[107,14,88,32],[107,16,88,34,"userData"],[108,8,88,43],[108,9,88,44],[108,12,88,47,"response"],[108,20,88,55],[108,21,88,56,"data"],[108,25,88,60],[110,8,90,6],[111,8,91,6,"setAccessToken"],[111,22,91,20],[111,23,91,21,"access_token"],[111,35,91,33],[111,36,91,34],[112,8,92,6,"setUser"],[112,15,92,13],[112,16,92,14,"userData"],[112,24,92,22],[112,25,92,23],[114,8,94,6],[115,8,95,6],[115,14,95,12,"AsyncStorage"],[115,26,95,24],[115,27,95,24,"default"],[115,34,95,24],[115,35,95,25,"setItem"],[115,42,95,32],[115,43,95,33],[115,57,95,47],[115,59,95,49,"access_token"],[115,71,95,61],[115,72,95,62],[116,8,96,6],[116,14,96,12,"AsyncStorage"],[116,26,96,24],[116,27,96,24,"default"],[116,34,96,24],[116,35,96,25,"setItem"],[116,42,96,32],[116,43,96,33],[116,49,96,39],[116,51,96,41,"JSON"],[116,55,96,45],[116,56,96,46,"stringify"],[116,65,96,55],[116,66,96,56,"userData"],[116,74,96,64],[116,75,96,65],[116,76,96,66],[117,8,98,6],[117,15,98,13],[118,10,98,15,"success"],[118,17,98,22],[118,19,98,24],[119,8,98,29],[119,9,98,30],[120,6,99,4],[120,7,99,5],[120,8,99,6],[120,15,99,13,"error"],[120,20,99,18],[120,22,99,20],[121,8,100,6],[121,15,100,13],[122,10,100,15,"success"],[122,17,100,22],[122,19,100,24],[122,24,100,29],[123,10,100,31,"error"],[123,15,100,36],[123,17,100,38],[124,8,100,79],[124,9,100,80],[125,6,101,4],[126,4,102,2],[126,5,102,3],[127,4,104,2],[127,10,104,8,"logout"],[127,16,104,14],[127,19,104,17],[127,25,104,17,"logout"],[127,26,104,17],[127,31,104,29],[128,6,105,4],[128,10,105,8],[129,8,106,6,"console"],[129,15,106,13],[129,16,106,14,"log"],[129,19,106,17],[129,20,106,18],[129,36,106,34],[129,37,106,35],[130,8,107,6],[130,14,107,12,"AsyncStorage"],[130,26,107,24],[130,27,107,24,"default"],[130,34,107,24],[130,35,107,25,"removeItem"],[130,45,107,35],[130,46,107,36],[130,60,107,50],[130,61,107,51],[131,8,108,6],[131,14,108,12,"AsyncStorage"],[131,26,108,24],[131,27,108,24,"default"],[131,34,108,24],[131,35,108,25,"removeItem"],[131,45,108,35],[131,46,108,36],[131,52,108,42],[131,53,108,43],[132,8,109,6,"setAccessToken"],[132,22,109,20],[132,23,109,21],[132,27,109,25],[132,28,109,26],[133,8,110,6,"setUser"],[133,15,110,13],[133,16,110,14],[133,20,110,18],[133,21,110,19],[134,8,111,6,"console"],[134,15,111,13],[134,16,111,14,"log"],[134,19,111,17],[134,20,111,18],[134,60,111,58],[134,61,111,59],[135,6,112,4],[135,7,112,5],[135,8,112,6],[135,15,112,13,"error"],[135,20,112,18],[135,22,112,20],[136,8,113,6,"console"],[136,15,113,13],[136,16,113,14,"error"],[136,21,113,19],[136,22,113,20],[136,38,113,36],[136,40,113,38,"error"],[136,45,113,43],[136,46,113,44],[137,6,114,4],[138,4,115,2],[138,5,115,3],[139,4,117,2],[139,24,118,4],[139,28,118,4,"_reactJsxDevRuntime"],[139,47,118,4],[139,48,118,4,"jsxDEV"],[139,54,118,4],[139,56,118,5,"AuthContext"],[139,67,118,16],[139,68,118,17,"Provider"],[139,76,118,25],[140,6,118,26,"value"],[140,11,118,31],[140,13,118,33],[141,8,118,35,"user"],[141,12,118,39],[142,8,118,41,"accessToken"],[142,19,118,52],[143,8,118,54,"isLoading"],[143,17,118,63],[144,8,118,65,"login"],[144,13,118,70],[145,8,118,72,"register"],[145,16,118,80],[146,8,118,82,"logout"],[147,6,118,89],[147,7,118,91],[148,6,118,91,"children"],[148,14,118,91],[148,16,119,7,"children"],[149,4,119,15],[150,6,119,15,"fileName"],[150,14,119,15],[150,16,119,15,"_jsxFileName"],[150,28,119,15],[151,6,119,15,"lineNumber"],[151,16,119,15],[152,6,119,15,"columnNumber"],[152,18,119,15],[153,4,119,15],[153,11,120,26],[153,12,120,27],[154,2,122,0],[154,3,122,1],[155,2,124,7],[155,8,124,13,"useAuth"],[155,15,124,20],[155,18,124,23,"useAuth"],[155,19,124,23],[155,24,124,29],[156,4,125,2],[156,10,125,8,"context"],[156,17,125,15],[156,20,125,18],[156,24,125,18,"useContext"],[156,30,125,28],[156,31,125,28,"useContext"],[156,41,125,28],[156,43,125,29,"AuthContext"],[156,54,125,40],[156,55,125,41],[157,4,126,2],[157,8,126,6,"context"],[157,15,126,13],[157,20,126,18,"undefined"],[157,29,126,27],[157,31,126,29],[158,6,127,4],[158,12,127,10],[158,16,127,14,"Error"],[158,21,127,19],[158,22,127,20],[158,67,127,65],[158,68,127,66],[159,4,128,2],[160,4,129,2],[160,11,129,9,"context"],[160,18,129,16],[161,2,130,0],[161,3,130,1],[162,0,130,2],[162,3]],"functionMap":{"names":["<global>","AuthProvider","useEffect$argument_0","loadSavedAuth","login","register","logout","useAuth"],"mappings":"AAA;qECuB;YCM;GDE;wBEE;GFc;gBGE;GHsB;mBIE;GJ4B;iBKE;GLW;CDO;uBOE;CPM"},"hasCjsExports":false},"type":"js/module"}]}